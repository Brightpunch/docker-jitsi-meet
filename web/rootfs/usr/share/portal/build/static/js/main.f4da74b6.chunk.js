(this["webpackJsonpannolens-portal"]=this["webpackJsonpannolens-portal"]||[]).push([[0],{10:function(e,t){var r="M_NOT_STARTED",n="M_ONGOING",a="M_ENDED",c=function(e){return e.realStartDateTime||e.realEndDateTime?e.realStartDateTime&&!e.realEndDateTime?n:e.realStartDateTime&&e.realEndDateTime?a:void 0:r};e.exports={MEETINGSTATUSES:{M_NOT_STARTED:"Meeting has not started yet",M_ONGOING:"Meeting is ongoing",M_ENDED:"Meeting has ended"},meetingStatus:c,meetingHasStarted:function(e){return c(e)===n},meetingHasNotStarted:function(e){return c(e)===r},meetingHasEnded:function(e){return c(e)===a},iAmModerator:function(e,t){return(e||{}).moderator&&e.moderator===((t||{}).user||{}).userId}}},111:function(e,t,r){},112:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),c=r.n(a),s=r(24),i=r.n(s),o=r(11),l=r(12),d=r(61),u=r.n(d),b=r(2),j=r.n(b),m=r(4),x=r(3),h=r(40),p=r.n(h),f=r(62),O=Object(f.storageFactory)((function(){return localStorage})),g="https://dev.annolens.com",v="ERROR_NO_ACCESSTOKEN",N=p.a.create({baseURL:g}),w=function(){var e=Object(m.a)(j.a.mark((function e(){var t,r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.getItem("refreshToken"),e.prev=1,e.next=4,N.get("/api/auth/access_token?refresh_token=".concat(t));case 4:if(r=e.sent,!(n=r.data).access_token){e.next=9;break}return O.setItem("accessToken",n.access_token),e.abrupt("return",n.access_token);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),O.removeItem("accessToken"),O.removeItem("refreshToken");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),y=p.a.create({baseURL:g});y.interceptors.request.use((function(e){var t=O.getItem("accessToken");return t?(e.headers.access_token=t,e):Promise.reject(v)}),(function(e){return Promise.reject(e)})),y.interceptors.response.use((function(e){return e}),function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,401!==(t.response||{}).status||r._retry){e.next=8;break}return r._retry=!0,e.next=5,w();case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",y(r));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var k=p.a.create({baseURL:g}),S=Object(a.createContext)(),T=function(e){var t=e.children,r=function(){var e=Object(a.useState)(null),t=Object(x.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(null),s=Object(x.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)(null),d=Object(x.a)(l,2),u=d[0],b=d[1],h=function(){var e=Object(m.a)(j.a.mark((function e(t){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=JSON.parse(O.getItem("user")),a=O.getItem("refreshToken"),r&&n(r),a&&b(a),t&&t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(j.a.mark((function e(t,r){var a,c,s,i,l,d,u,m,x,h,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.code,c=t.state,e.prev=1,a){e.next=4;break}return e.abrupt("return",r(c));case 4:return e.next=6,k.get("/api/auth/access_token?code=".concat(a));case 6:if(s=e.sent,i=s.data,l=s.status,d=s.statusText,!(l>=400)){e.next=13;break}return console.log("Error getting access_token:",l,d),e.abrupt("return");case 13:return o(i.access_token),O.setItem("accessToken",i.access_token),b(i.refresh_token),O.setItem("refreshToken",i.refresh_token),e.next=19,y.get("/api/user");case 19:if(u=e.sent,m=u.data,!((x=u.status)>=400)){e.next=25;break}return console.log("Error getting user data:",x),e.abrupt("return");case 25:n(m),O.setItem("user",JSON.stringify(m)),e.next=35;break;case 29:e.prev=29,e.t0=e.catch(1),e.t0.response?(p=e.t0.response.status,console.log("Axios: error=",JSON.stringify(e.t0.response)),h=(p?"status=".concat(p,"; "):"")+(e.t0.response.data||{}).message):e.t0.request?(console.log("Axios: no response"),h="no response"):(console.log("other Axios error:",e.t0),h="other error"),console.log("errMsg:",h),h&&alert(h),f(r);case 35:r&&r(c);case 36:case"end":return e.stop()}}),e,null,[[1,29]])})));return function(t,r){return e.apply(this,arguments)}}(),f=function(e){console.log("signout called"),n(null),O.removeItem("user"),O.removeItem("accessToken"),O.removeItem("refreshToken"),window.location.href="".concat(g,"/api/auth/logout"),e&&e()};return{user:r,signin:p,signout:f,updateUser:h,accessToken:i,refreshToken:u}}();return Object(n.jsx)(S.Provider,{value:r,children:t})},E=function(){var e=Object(a.useContext)(S);if(!e)throw new Error("useAuth must be used within a ProvideAuth");return e};var D=function(e){var t=E();return Object(n.jsx)("div",{className:"bg-blue-500 border border-blue-200 relative h-full min-h-screen",children:Object(n.jsxs)("nav",{children:[t.user.roles.includes("admin")&&Object(n.jsx)("div",{className:"relative sidebar-item with-children",children:Object(n.jsx)("div",{className:"text-white text-s",children:Object(n.jsx)(o.b,{className:"block text-center x shadow-light x py-6 border-transparent hover:bg-blue-900",to:"/user-list",children:"Users"})})}),Object(n.jsx)("div",{className:"relative sidebar-item with-children",children:Object(n.jsx)("div",{className:"text-white text-s",children:Object(n.jsx)(o.b,{className:"block text-center x shadow-light x py-6 border-transparent hover:bg-blue-900",to:"/profile",children:"Profile"})})}),Object(n.jsx)("div",{className:"relative sidebar-item with-children",children:Object(n.jsx)("div",{className:"text-white text-s",children:Object(n.jsx)(o.b,{className:"block text-center x shadow-light x py-6 border-transparent hover:bg-blue-900",to:"/meetings",children:"Meetings"})})})]})})},C=function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"bg-blue-500 w-full flex flex-col items-center justify-between",children:[Object(n.jsx)("div",{className:"w-full relative with-children",children:Object(n.jsx)("div",{className:"text-white text-s",children:Object(n.jsx)(o.b,{className:"block xl:flex xl:items-center text-center xl:text-left shadow-light xl:shadow-none py-6 xl:py-2 xl:px-4 border-l-4 border-transparent hover:bg-blue-900",to:"/profile",children:"Profile"})})}),Object(n.jsx)("div",{className:"w-full relative with-children",children:Object(n.jsx)("div",{className:"text-white text-s",children:Object(n.jsx)(o.b,{className:"block xl:flex xl:items-center text-center xl:text-left shadow-light xl:shadow-none py-6 xl:py-2 xl:px-4 border-l-4 border-transparent hover:bg-blue-900",to:"/meetings",children:"Meetings"})})})]})})},_=r(9),I=r(41),M=r(63),A=new URL("https://dev.annolens.com");A.pathname="/portal/";var F=A,G="c[a-z0-9]{24}",U=(new RegExp(G),function(e){return"".concat(F.href,"m/").concat(e)}),H=function(e){return"".concat(F,"m/").concat(e,"/guest")},R=function(){var e=Object(m.a)(j.a.mark((function e(t,r,n){var a,c,s,i,o,l,d,u,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=7;break}return e.next=4,k.get("/api/meetings/room/byslug/".concat(t,"?name=").concat(encodeURIComponent(r)));case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,y.get("/api/meetings/room/byslug/".concat(t));case 9:e.t0=e.sent;case 10:if(a=e.t0,c=a.data,s=a.status,i=a.statusText,!(s<400)){e.next=21;break}return o="".concat("https://dev.annolens.com","/").concat(encodeURIComponent(c.roomName),"?jwt=").concat(c.jwt),l=Object(M.openTab)(o,c.roomName,U(t)),n&&n(l,o),e.abrupt("return",void 0);case 21:return e.abrupt("return","".concat(s,": ").concat(i));case 22:e.next=39;break;case 24:if(e.prev=24,e.t1=e.catch(0),!e.t1.response){e.next=32;break}return d=e.t1.response,u=d.data,b=d.status,console.log("Axios: error=",e.t1.response),e.abrupt("return",(b?"status=".concat(b,"; "):"")+((u||{}).error||{}).message);case 32:if(!e.t1.request){e.next=37;break}return console.log("Axios: no response"),e.abrupt("return","no response");case 37:return console.log("other Axios error"),e.abrupt("return","other error");case 39:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,r,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.next=3,y.get("/api/meetings/byslug/".concat(r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.meetingId,n=t.meetingParticipants,e.abrupt("return",y.post("/api/user/participantInfos/".concat(r),{participantIds:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.meetingId,n=t.moderatorId,!t.asGuest){e.next=7;break}return e.next=4,k.post("/api/meetings/".concat(r,"/moderator"),{moderatorId:n});case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,y.post("/api/meetings/".concat(r,"/moderator"),{moderatorId:n});case 9:e.t0=e.sent;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.post("/api/meetings",Object(I.a)({},t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,y.put("/api/meetings/".concat(r,"/start"),{_id:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,y.put("/api/meetings/".concat(r,"/stop"),{_id:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,y.delete("/api/meetings/".concat(r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(m.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.meetingId,n=t.participantId,e.next=3,y.post("/api/meetings/".concat(r,"/participants"),{participantId:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,y.get("/api/user/byid/".concat(r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(j.a.mark((function e(t){var r,n,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,n=t.email,a=t.username,c=t.fullName,e.next=3,y.put("/api/user/".concat(r),{_id:r,email:n,username:a,fullName:c});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(m.a)(j.a.mark((function e(t){var r,n,a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pageKey,n=t.perPage,a=void 0===n?25:n,c=t.searchText,s=void 0===c?"":c,e.next=3,y.get("/api/user/list?".concat(r?"&previous=".concat(r):"").concat(a?"&per_page=".concat(a):"","&search=").concat(s));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(m.a)(j.a.mark((function e(t){var r,n,a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pageKey,n=t.perPage,a=void 0===n?25:n,c=t.searchText,s=void 0===c?"":c,e.next=3,y.get("/api/user/list?".concat(r?"next=".concat(r):"").concat(a?"&per_page=".concat(a):"","&search=").concat(s));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=6;break}return e.next=3,y.put("/api/user/".concat(t._id),Object(I.a)({},t));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,y.post("/api/user/new",Object(I.a)({},t));case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,e.next=3,y.delete("/api/user/".concat(r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=r(114),te=function(e){var t=e.id,r=e.colour,a=e.text,c=e.additionalClass,s=void 0===c?"":c,i=e.type,o=void 0===i?"button":i,l=e.disabled,d=e.children,u=e.onClick;return Object(n.jsxs)("button",{id:t,className:"p-4 uppercase bg ".concat(r?"bg-".concat(r,"-400 ").concat(l?"":"hover:bg-".concat(r,"-600")):""," ").concat(l?"opacity-25 cursor-not-allowed":""," w-max rounded-md ").concat(s),onClick:u,type:o,disabled:l,children:[a,d]})},re=r(7),ne=function(e,t,r){return e[r]&&t[r]?"border-2 border-red-400":""},ae=function(e){var t=e.initialUser,r=void 0===t?{}:t,c=e.afterSubmit,s=Object(a.useState)(),i=Object(x.a)(s,2),o=i[0],l=i[1],d=Object(_.b)($,{onSuccess:function(e){_.a.refetchQueries(["users"]),l(null),c&&c()},onError:function(e){l(e.response.data),console.log("onError: ",e.response.data)}}),u=Object(x.a)(d,2),b=u[0],h=u[1].error,p=function(){var e=Object(m.a)(j.a.mark((function e(t,r){var n,a,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,a=t.username,c=t.email,s=t.fullName,i=r.setSubmitting,e.prev=2,e.next=5,b({_id:n,username:a,email:c,fullName:s});case 5:i(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("mutation error:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}(),f=Object(_.b)(X,{onSuccess:function(e){_.a.refetchQueries(["users"]),l(null),c&&c()},onError:function(e){l(e.response.data),console.log("delete onError: ",e.response.data)}}),O=Object(x.a)(f,1)[0],g=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O({_id:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("delete error:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"m-4 p-4 rounded border border-2 md:w-5/6 lg:w-2/3 max-w-prose",children:Object(n.jsx)(re.d,{initialValues:{_id:r._id,username:r.username||"",email:r.email||"",fullName:r.fullName||""},validate:function(e){var t={};return(!e.email||!e.email.length>3)&&(t.email="Required"),e.fullName&&e.fullName.length>30&&(t.fullName="Max 30 characters"),t},onSubmit:p,children:function(e){var t=e.values,r=e.errors,a=e.touched,s=e.isSubmitting;return Object(n.jsxs)(re.c,{children:[Object(n.jsxs)("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-4",children:[Object(n.jsx)("div",{className:"",children:"User name\xa0"}),Object(n.jsx)(re.b,{className:"md:col-span-3 bg bg-yellow-200 rounded p-2 ".concat(ne(r,a,"username")),type:"text",name:"username",placeholder:"User name"}),Object(n.jsx)("div",{}),Object(n.jsx)(re.a,{name:"username",render:function(e){return Object(n.jsx)("div",{className:"text-red-400",children:e})}})]}),Object(n.jsxs)("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-4",children:[Object(n.jsx)("div",{className:"",children:"E-mail\xa0"}),Object(n.jsx)(re.b,{className:"md:col-span-3 bg bg-yellow-200 rounded p-2 ".concat(ne(r,a,"email")),type:"text",name:"email",placeholder:"E-mail"}),Object(n.jsx)("div",{}),Object(n.jsx)(re.a,{name:"email",render:function(e){return Object(n.jsx)("div",{className:"text-red-400",children:e})}})]}),Object(n.jsxs)("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-4",children:[Object(n.jsx)("div",{className:"",children:"Full name\xa0"}),Object(n.jsx)(re.b,{className:"md:col-span-3 bg bg-yellow-200 rounded p-2 ".concat(ne(r,a,"fullName")),type:"text",name:"fullName",placeholder:"Full name"}),Object(n.jsx)("div",{}),Object(n.jsx)(re.a,{name:"fullName",render:function(e){return Object(n.jsx)("div",{className:"text-red-400",children:e})}})]}),Object(n.jsxs)("div",{className:"flex justify-between flex-row flex-wrap",children:[Object(n.jsx)("div",{className:"p-2",children:Object(n.jsx)(te,{colour:"green",disabled:s,type:"submit",children:"Submit"})}),Object(n.jsx)("div",{className:"p-2",children:Object(n.jsxs)(te,{colour:"red",additionalClass:"flex items-center",onClick:c,children:[Object(n.jsx)("i",{className:"far fa-window-close text-xl"}),Object(n.jsx)("span",{children:"\xa0 Cancel"})]})}),Object(n.jsx)("div",{className:"p-2",children:Object(n.jsxs)(te,{colour:"red",additionalClass:"flex items-center",onClick:function(e){return g(t._id)},children:[Object(n.jsx)("i",{className:"far fa-trash-alt text-xl"}),Object(n.jsx)("span",{children:"\xa0 Delete"})]})})]}),(o||h)&&Object(n.jsx)("div",{className:"text-red-400",children:(o||h).message})]})}})})},ce=function(){var e=Object(ee.a)("userList"),t=Object(a.useState)(""),r=Object(x.a)(t,2),s=r[0],i=r[1],o=function(e,t){var r=Object(a.useState)(e),n=Object(x.a)(r,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){var r=setTimeout((function(){s(e)}),t);return function(){clearTimeout(r)}}),[e,t]),c}(s,500),l=Object(a.useState)({}),d=Object(x.a)(l,2),u=d[0],b=d[1],h=Object(a.useState)(),p=Object(x.a)(h,2),f=p[0],O=p[1],g=Object(a.useState)(),v=Object(x.a)(g,2),N=v[0],w=v[1],y=Object(a.useState)(),k=Object(x.a)(y,2),S=k[0],T=k[1],E=Object(a.useState)(),D=Object(x.a)(E,2),C=D[0],I=D[1],M=Object(a.useState)(!1),A=Object(x.a)(M,2),F=A[0],G=A[1],U=Object(a.useState)(!1),H=Object(x.a)(U,2),R=H[0],P=H[1],L=Object(_.c)(["users",u.next,u.previous,o],function(){var e=Object(m.a)(j.a.mark((function e(t,r,n,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,Z({pageKey:r,searchText:a});case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,W({pageKey:n,searchText:a});case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),{keepPreviousData:!0,onSuccess:function(e){var t=e.data;(s||t.items.length)&&T(t),I(null),t.items.length?f||O(t.previous):N||w(u.next)},onError:function(e){var t=(((e.response||{}).data||{}).error||(e.response||{}).data||{}).message;I(t||e)}}),B=L.isFetching,J=L.isLoading,Q=function(e){O(null),w(null),i(e),b({})};return Object(n.jsxs)(n.Fragment,{children:[F?Object(n.jsx)(ae,{afterSubmit:function(e){return G(!1)}}):Object(n.jsx)("div",{className:"mt-4 mb-4 p-4 flex",children:Object(n.jsxs)("div",{className:"ml-auto",children:[Object(n.jsx)("label",{htmlFor:"addUser"}),Object(n.jsxs)(te,{id:"addUser",colour:"white",onClick:function(e){return G(!0)},additionalClass:"p-4 border-2 rounded-md hover:bg-gray-100 flex items-center",children:[Object(n.jsx)("i",{className:"far fa-plus-square text-xl"}),"\xa0",e("addUserButton","add")]})]})}),S&&Object(n.jsx)("div",{style:{width:"max-content"},children:Object(n.jsxs)("div",{className:"m-4 flex rounded border border-width-2",children:[Object(n.jsx)("input",{value:s,onChange:function(e){return Q(e.target.value)},placeholder:"Search",className:"p-2"}),Object(n.jsxs)(te,{id:"clearSearch",colour:"white",onClick:function(e){return Q("")},children:[Object(n.jsx)("i",{className:"far fa-window-close text-xl"}),"\xa0"]})]})}),S&&S.items&&S.items.length?Object(n.jsx)("div",{className:"m-4",children:S.items.map((function(e){return R&&R===e._id?Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(ae,{afterSubmit:function(e){P(!1),_.a.refetchQueries(["users"])},initialUser:e},e._id),Object(n.jsxs)("div",{className:"p-4 ",children:["Roles:",e.roles.sort().map((function(e){return Object(n.jsxs)("div",{className:"p-2",children:[Object(n.jsx)("i",{className:"fas fa-user-tag"}),"\xa0",e]},e)}))]})]},e._id):Object(n.jsxs)("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-10 gap-2 rounded border border-width-2 border-opacity-25 mb-2",children:[Object(n.jsx)("div",{className:"xl:col-span-4",children:e.email}),Object(n.jsx)("div",{className:"text-left md:text-right xl:text-left xl:col-span-2",children:e.username}),Object(n.jsx)("div",{className:"xl:col-span-3",children:e.fullName}),Object(n.jsx)(te,{id:"editUser",disabled:B||J,onClick:function(t){P(e._id)},children:Object(n.jsxs)("div",{className:"text-right",children:[Object(n.jsx)("i",{className:"fas fa-user-edit text-2xl"}),e.roles.includes("admin")?Object(n.jsx)("i",{className:"fas fa-user-shield text-2xl"}):null]})})]},e._id)}))}):Object(n.jsx)("div",{children:" nothing to show "}),S&&Object(n.jsxs)("div",{className:"flex m-4",children:[Object(n.jsx)(te,{colour:"green",disabled:S.previous===f,additionalClass:"mr-4",onClick:function(e){return b({previous:S.previous})},children:"Previous"}),Object(n.jsx)(te,{colour:"green",disabled:S.next===N,onClick:function(e){return b({next:S.next})},children:"Next"})]}),J&&Object(n.jsx)("div",{children:"loading..."}),C?Object(n.jsxs)("div",{children:["Error: ",JSON.stringify(C)]}):null]})},se=function(e,t,r){return e[r]&&t[r]?"border-2 border-red-400":""},ie=function(e){var t=E(),r=Object(ee.a)("profile"),c=Object(a.useState)(!1),s=Object(x.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)({email:t.user.email||"",username:t.user.username||"",fullName:t.user.fullName||""}),d=Object(x.a)(l,2),u=d[0],b=d[1],h=Object(a.useState)(),p=Object(x.a)(h,2),f=p[0],O=p[1],g=Object(a.useState)(),v=Object(x.a)(g,2),N=v[0],w=v[1],y=Object(a.useState)(),k=Object(x.a)(y,2),S=k[0],T=k[1],D=Object(_.b)(Y,{onSuccess:function(e){o(!1),e.data.user.email!==u.email&&w(r("emailChanged")),T(void 0)},onError:function(e){var t=((e.response||{}).data||{}).message;T(t||e)}}),C=Object(x.a)(D,1)[0],I=function(){var e=Object(m.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.setSubmitting,e.prev=1,e.next=4,C(t);case 4:n(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("mutation error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),M=Object(_.c)(["user",t.user.userId],function(){var e=Object(m.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V({id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{onSuccess:function(e){var t=e.data;b(t),O(void 0)},onError:function(e){var t=(((e.response||{}).data||{}).error||{}).message;O(t||e)}}),A=M.isFetching,F=M.isLoading;return Object(n.jsxs)("div",{className:"flex flex-col mt-2 ml-8 mr-8 ".concat(A||F?"cursor-wait":""),children:[Object(n.jsxs)("div",{className:"ml-auto",children:[Object(n.jsx)("label",{htmlFor:"editUser"}),!i&&Object(n.jsxs)(te,{id:"editUser",disabled:A||F,onClick:function(e){o(!0),w(void 0)},additionalClass:"border-2 flex items-center",children:[Object(n.jsx)("i",{className:"fas fa-user-edit text-2xl"}),"\xa0",r("editUserButton","add")]})]}),!!N&&Object(n.jsx)("div",{className:"mt-4 p-4 rounded border border-width-2 bg-orange-200",children:N}),u&&Object(n.jsx)(re.d,{initialValues:{userId:t.user.userId,email:u.email,username:u.username,fullName:u.fullName},enableReinitialize:!0,validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.fullName&&e.fullName.length>30&&(t.fullName="Max 30 characters"),t},onSubmit:I,children:function(e){var r=e.errors,a=e.touched,c=e.isSubmitting,s=e.resetForm;return Object(n.jsxs)(re.c,{children:[Object(n.jsxs)("div",{className:"mt-4 mb-2 border rounded border-width-2 border-opacity-25",children:[t.user?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"p-4 flex items-center",children:[Object(n.jsx)("i",{className:"fas fa-user"}),"\xa0",Object(n.jsx)(re.b,{disabled:!i,className:"bg ".concat(i?"bg-yellow-200":""," rounded p-2 ").concat(se(r,a,"username")," flex-1"),type:"text",name:"username",placeholder:"Username"}),Object(n.jsx)(re.a,{name:"username",render:function(e){return Object(n.jsx)("div",{className:"text-red-400",children:e})}})]}),Object(n.jsxs)("div",{className:"p-4 flex items-center flex-grow",children:[Object(n.jsx)("i",{className:"fas fa-at"}),"\xa0",Object(n.jsx)(re.b,{disabled:!i,className:"bg ".concat(i?"bg-yellow-200":""," rounded p-2 ").concat(se(r,a,"email")," flex-1"),type:"text",name:"email",placeholder:"e-mail"}),Object(n.jsx)(re.a,{name:"email",render:function(e){return Object(n.jsx)("div",{className:"text-red-400",children:e})}})]}),Object(n.jsxs)("div",{className:"p-4 flex items-center flex-grow",children:[Object(n.jsx)(re.b,{disabled:!i,className:"bg ".concat(i?"bg-yellow-200":""," rounded p-2 ").concat(se(r,a,"fullName")," flex-1"),type:"text",name:"fullName",placeholder:"Full name"}),Object(n.jsx)(re.a,{name:"fullName",render:function(e){return Object(n.jsx)("div",{className:"text-red-400",children:e})}})]}),Object(n.jsxs)("div",{className:"p-4 ",children:["Roles:",(u.roles||[]).sort().map((function(e){return Object(n.jsxs)("div",{className:"p-2",children:[Object(n.jsx)("i",{className:"fas fa-user-tag"}),"\xa0",e]},e)}))]})]}):null,i&&Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"m-2 flex justify-between flex-row flex-wrap",children:[Object(n.jsx)("div",{className:"p-2",children:Object(n.jsx)(te,{colour:"green",disabled:c,type:"submit",children:"Submit"})}),Object(n.jsx)("div",{className:"p-2",children:Object(n.jsxs)(te,{colour:"red",disabled:c,onClick:function(e){s(),_.a.clear(),o(!1)},additionalClass:"flex items-center",type:"reset",children:[Object(n.jsx)("i",{className:"far fa-window-close text-xl"}),Object(n.jsx)("span",{children:"\xa0 Cancel"})]})})]})})]}),f&&Object(n.jsx)("div",{className:"text-red-400",children:f.message}),S&&Object(n.jsx)("div",{className:"text-red-400",children:S})]})}}),Object(n.jsx)("div",{children:F&&"loading..."})]})},oe=r(66),le=r(16),de=r(10),ue=function(e){var t=e.meeting,r=e.auth,a=e.queryKeys,c=Object(_.b)(Q,{onSuccess:function(e){return _.a.refetchQueries(a)}}),s=Object(x.a)(c,1)[0],i=Object(_.b)(K,{onSuccess:function(e){return _.a.refetchQueries(a)}}),o=Object(x.a)(i,1)[0];return Object(de.iAmModerator)(t,r)&&t.slug&&Object(de.meetingHasNotStarted)(t)?Object(n.jsx)(te,{colour:"green",onClick:function(e){return s({id:t._id})},text:"START"}):Object(de.meetingHasStarted)(t)?Object(n.jsx)(te,{colour:"green",onClick:function(e){return o({id:t._id})},text:"STOP"}):t.realStartDateTime?Object(n.jsx)(te,{colour:"green",onClick:function(e){return s({id:t._id})},text:"RESTART"}):Object(n.jsx)("div",{children:Object(de.meetingStatus)(t)})},be=r(20),je=function(e,t){return e?"".concat(e).concat(t):""},me=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t={},r={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};return Object.keys(r).forEach((function(n){t[n]=Math.floor(e/r[n]),e-=t[n]*r[n]})),t}(e.duration);return 0===e.duration?"0m":"".concat(je(t.month,"mth")," ").concat(je(t.week,"w")," ").concat(je(t.day,"d")," ").concat(je(t.hour,"h")," ").concat(je(t.minute,"m")," ").concat(je(t.second,"s"))},xe=function(e){var t=e.auth,r=e.data,c=Object(a.useState)(),s=Object(x.a)(c,2),i=s[0],l=s[1],d=Object(a.useState)(),u=Object(x.a)(d,2),b=u[0],h=u[1],p=function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(de.meetingHasStarted)(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,R(t.slug,void 0,(function(e,r){return l({id:t._id,tabOpened:e,url:e?null:r})}));case 4:(r=e.sent)&&h({id:t._id,message:JSON.stringify(r)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"flex flex-col m-1 md:m-4 mt-1 ",children:(r||[]).map((function(e){return Object(n.jsxs)("div",{className:"flex flex-wrap justify-between p-4 border rounded border-width-2 border-opacity-25 mb-2",children:[Object(n.jsx)("div",{className:"ml-1 md:ml-2 md:mr-2",children:Object(de.iAmModerator)(e,t)?Object(n.jsx)(o.b,{to:"/meeting/".concat(e.slug),children:Object(n.jsx)("div",{className:"w-48 bg bg-green-400 hover:bg-green-600 rounded-md p-4 ",children:e.topic||"\u2014"})}):Object(n.jsx)("div",{className:"p-1 ",children:e.topic||"\u2014"})}),Object(n.jsxs)("div",{className:"flex flex-col",children:[Object(n.jsx)("div",{className:"ml-2 mr-2 ".concat(e.realStartDateTime?"italic":""),children:(r=e.startDateTime,a=e.realStartDateTime,a?Object(be.a)(Object(le.a)(a),"d.M.yyyy HH:mm"):r?Object(be.a)(Object(le.a)(r),"d.M.yyyy HH:mm"):"\u2014")}),Object(n.jsx)("div",{className:"ml-2 mr-2",children:me(e)})]}),Object(de.iAmModerator)(e,t)?Object(n.jsx)("div",{className:"ml-2 mr-2 ",children:Object(n.jsx)(ue,{meeting:e,auth:t})}):Object(n.jsx)("div",{}),Object(de.iAmModerator)(e,t)?Object(n.jsxs)("div",{className:"ml-2 mr-2 ",children:[Object(n.jsx)("button",{className:"w-48 text-center  uppercase rounded-md p-4 ".concat(Object(de.meetingHasStarted)(e)?"bg bg-green-400 hover:bg-green-600":"bg bg-gray-400 cursor-not-allowed text-gray-600"),onClick:function(t){return p(e)},disabled:!Object(de.meetingHasStarted)(e),children:"Open meeting"}),!!i&&!i.tabOpened&&i.id===e._id&&Object(n.jsxs)("div",{className:"p-4 rounded-md bg-red-300 break-all",children:[Object(n.jsx)("p",{children:"Pop-up blocked, use"}),Object(n.jsx)("p",{children:Object(n.jsx)("a",{className:"underline",href:i.url,children:i.url})})]}),b&&b.id===e._id&&Object(n.jsxs)("div",{className:"p-4 rounded-md bg-red-300 break-all",children:[Object(n.jsx)("p",{children:"Error:"}),Object(n.jsx)("p",{children:b.message})]})]}):Object(n.jsx)("div",{className:"ml-2 mr-2 ",children:Object(n.jsx)(o.b,{to:"/m/".concat(e.slug),children:Object(n.jsx)("div",{className:"w-48 text-center bg bg-green-400 hover:bg-green-600 uppercase rounded-md p-4 ",children:"Join meeting"})})})]},e._id);var r,a}))})},he=function(){var e=E(),t=Object(a.useState)(),r=Object(x.a)(t,2),c=r[0],s=r[1];Object(a.useEffect)((function(){c&&(console.log("useEffect: JWT expired, calling signout"),e.signout((function(e){return console.log("auth.signout finished due to expired JWT")})))}),[e,c]);var i=function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("".concat("https://dev.annolens.com","/api/meetings"));case 2:return r=e.sent,e.abrupt("return",r?r.data.sort((function(e,t){return Object(oe.a)(Object(le.a)(e.startDateTime),Object(le.a)(t.startDateTime))?-1:1})):[]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Object(_.c)(["meetings"],i,{refetchInterval:6e4,onError:function(e){e.response?console.error("useQuery.onError:",e.response):console.error("useQuery other error:",e.message)}}),l=o.isFetching,d=o.isLoading,u=o.isError,b=o.data,h=o.error;if(u){var p=(((h.response||{}).data||{}).error||{message:[""]}).message;return c||O.getItem("accessToken")||(console.log("setJwtExpired"),s(!0)),h.message?Object(n.jsx)("div",{className:"flex h-screen items-center justify-center",children:Object(n.jsx)("div",{className:"text-center text-3xl items-start",children:Object(n.jsxs)("div",{children:["Other Error: ",h.message]})})}):Object(n.jsx)("div",{className:"flex h-screen items-center justify-center",children:Object(n.jsx)("div",{className:"text-center text-3xl items-start",children:Object(n.jsxs)("div",{children:["Error: ",JSON.stringify(p)]})})})}var f=(b||[]).filter((function(t){return t.moderator===e.user.userId})),g=(b||[]).filter((function(t){return t.moderator!==e.user.userId}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{id:"MeetingsTable",className:d||l?"cursor-wait":void 0,children:[f.length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"font-bold ml-1 mt-1 md:ml-4 md:mt-4",children:"You are moderator in these meetings:"}),Object(n.jsx)(xe,{auth:e,data:f})]}):Object(n.jsx)("div",{className:"text-lg text-center m-4",children:"No own meetings"}),g.length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"font-bold ml-4 mt-4",children:"You are participant in these meetings:"}),Object(n.jsx)(xe,{auth:e,data:g})]}):Object(n.jsx)("div",{className:"text-lg text-center m-4"})]}),d&&Object(n.jsx)("div",{children:"loading..."})]})},pe=r(48),fe=function(e,t,r){return e[r]&&t[r]?"border-2 border-red-400":""},Oe=function(e){var t=e.initialMeeting,r=void 0===t?{}:t,a=e.showDeleteButton,c=void 0!==a&&a,s=e.afterSubmit,i=Object(_.b)(J,{onSuccess:function(e){_.a.refetchQueries(["meetings"]),_.a.refetchQueries(["meeting",r.slug])}}),o=Object(x.a)(i,2),l=o[0],d=o[1].error,u=function(){var e=Object(m.a)(j.a.mark((function e(t,r){var n,a,c,i,o,d,u,b,m,x,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,a=t.startDate,c=t.startTime,i=t.endDate,o=t.endTime,d=t.topic,u=t.isGuestsAllowed,b=t.description,m=r.setSubmitting,x=Object(pe.a)("".concat(a," ").concat(c),"yyyy-MM-dd HH:mm",new Date),h=Object(pe.a)("".concat(i," ").concat(o),"yyyy-MM-dd HH:mm",new Date),e.prev=4,e.next=7,l({_id:n,topic:d,startDateTime:x,endDateTime:h,isGuestsAllowed:u,description:b});case 7:m(!1),s&&s(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("mutation error:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,r){return e.apply(this,arguments)}}();return d&&console.log("error=",d),Object(n.jsx)("div",{className:"m-4",children:Object(n.jsx)(re.d,{initialValues:{_id:r._id,topic:r.topic||"",startDate:r.startDateTime?Object(be.a)(Object(le.a)(r.startDateTime),"yyyy-MM-dd"):"",startTime:r.startDateTime?Object(be.a)(Object(le.a)(r.startDateTime),"HH:mm"):"",endDate:r.endDateTime?Object(be.a)(Object(le.a)(r.endDateTime),"yyyy-MM-dd"):"",endTime:r.endDateTime?Object(be.a)(Object(le.a)(r.endDateTime),"HH:mm"):"",isGuestsAllowed:r.isGuestsAllowed||!1,description:r.description||""},onSubmit:u,children:function(e){var t=e.errors,r=e.touched,a=e.isSubmitting;return Object(n.jsxs)(re.c,{children:[Object(n.jsxs)("div",{className:"p-2 flex flex-col",children:[Object(n.jsx)("div",{className:"text-sm ",children:"Topic"}),Object(n.jsx)(re.b,{className:"bg bg-yellow-200 rounded p-2 ".concat(fe(t,r,"topic")),type:"text",name:"topic",placeholder:"Meeting Topic"}),Object(n.jsx)(re.a,{name:"topic",render:function(e){return Object(n.jsx)("div",{className:"text-red-400",children:e})}})]}),Object(n.jsxs)("div",{className:"flex flex-col lg:flex-row lg:flex-wrap",children:[Object(n.jsxs)("div",{className:"p-2",children:[Object(n.jsx)("div",{className:"text-sm ",children:"Scheduled start"}),Object(n.jsx)(re.b,{className:"bg bg-yellow-200 rounded p-2 ".concat(fe(t,r,"startDate")),type:"date",name:"startDate",placeholder:"Start Date"}),Object(n.jsx)(re.b,{className:"bg bg-yellow-200 rounded p-2 ".concat(fe(t,r)),type:"time",name:"startTime",placeholder:"Start Time"})]}),Object(n.jsxs)("div",{className:"p-2",children:[Object(n.jsx)("div",{className:"text-sm ",children:"Scheduled end"}),Object(n.jsx)(re.b,{className:"bg bg-yellow-200 rounded p-2 ".concat(fe(t,r)),type:"date",name:"endDate",placeholder:"End Date"}),Object(n.jsx)(re.b,{className:"bg bg-yellow-200 rounded p-2 ".concat(fe(t,r)),type:"time",name:"endTime",placeholder:"End Time"})]}),Object(n.jsxs)("div",{className:"p-2",children:[Object(n.jsx)("label",{htmlFor:"isGuestsAllowed",children:Object(n.jsx)("div",{className:"text-sm ",children:"Guests allowed\xa0"})}),Object(n.jsx)(re.b,{id:"isGuestsAllowed",className:"bg bg-yellow-200 rounded p-2 ".concat(fe(t,r)),name:"isGuestsAllowed",type:"checkbox"})]})]}),Object(n.jsxs)("div",{className:"p-2 flex flex-col",children:[Object(n.jsx)("div",{className:"text-sm ",children:"Description"}),Object(n.jsx)(re.b,{className:"bg bg-yellow-200 rounded p-2 ".concat(fe(t,r,"description")),type:"textarea",component:"textarea",rows:3,name:"description",placeholder:"Meeting description"}),Object(n.jsx)(re.a,{name:"name",component:"div"})]}),Object(n.jsxs)("div",{className:"flex justify-between flex-row flex-wrap",children:[Object(n.jsx)("div",{className:"p-2",children:Object(n.jsx)(te,{colour:"green",disabled:a,type:"submit",children:"Submit"})}),c&&Object(n.jsx)("div",{className:"p-2",children:Object(n.jsx)(te,{colour:"red",children:"Delete"})}),Object(n.jsx)("div",{className:"p-2",children:Object(n.jsxs)(te,{colour:"red",additionalClass:"flex items-center",onClick:s,children:[Object(n.jsx)("i",{className:"far fa-window-close text-xl"}),Object(n.jsx)("span",{children:"\xa0 Cancel"})]})})]}),d&&Object(n.jsx)("div",{className:"text-red-400",children:d.message})]})}})})},ge=function(){var e=Object(ee.a)("meetingDetails"),t=Object(a.useState)(!1),r=Object(x.a)(t,2),c=r[0],s=r[1];return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"mt-4 mb-4 p-4 flex",children:Object(n.jsxs)("div",{className:"ml-auto",children:[Object(n.jsx)("label",{htmlFor:"addMeeting"}),!c&&Object(n.jsxs)(te,{id:"addMeeting",colour:"white",onClick:function(e){return s(!0)},additionalClass:"p-4 border-2 rounded-md hover:bg-gray-100 flex items-center",children:[Object(n.jsx)("i",{className:"far fa-plus-square text-xl"}),"\xa0",e("addMeetingButton","add")]})]})}),Object(n.jsxs)("div",{className:"m-1 p-1 md:m-4 md:p-4 border-2 rounded-md",children:[c&&Object(n.jsx)(Oe,{afterSubmit:function(e){return s(!1)}}),Object(n.jsx)(he,{})]})]})},ve=function(e){return e?"string"===typeof e?Object(be.a)(Object(le.a)(e),"dd.MM.yyyy HH:mm"):Object(be.a)(e,"dd.MM.yyyy HH:mm"):void 0},Ne="Guest",we=function(e){var t=e.guestRoute,r=E(),c=Object(l.i)().slug,s=Object(a.useState)(),i=Object(x.a)(s,2),d=i[0],u=i[1],b=Object(a.useState)(),h=Object(x.a)(b,2),p=h[0],f=h[1],O=Object(a.useState)(0),g=Object(x.a)(O,2),N=g[0],w=g[1],S=Object(a.useState)(),T=Object(x.a)(S,2),D=T[0],C=T[1],I=Object(a.useState)(!1),M=Object(x.a)(I,2),A=M[0],F=M[1],G=Object(a.useState)(!1),U=Object(x.a)(G,2),H=U[0],P=U[1],L=Object(a.useState)(),J=Object(x.a)(L,2),Q=J[0],K=J[1],q=Object(a.useState)(),Y=Object(x.a)(q,2),W=Y[0],Z=Y[1],$=Object(a.useState)(Ne),X=Object(x.a)($,2),ee=X[0],ne=X[1],ae=Object(a.useState)(),ce=Object(x.a)(ae,2),se=ce[0],ie=ce[1],oe=Object(a.useState)(),le=Object(x.a)(oe,2),ue=le[0],be=le[1];Object(a.useEffect)((function(){D&&r.signout()}),[r,D]);var je=Object(_.c)(["meeting",c],function(){var e=Object(m.a)(j.a.mark((function e(r,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!e.sent){e.next=6;break}e.t0=k.get("/api/meetings/byslug/".concat(n,"/status")),e.next=7;break;case 6:e.t0=y.get("/api/meetings/byslug/".concat(n,"/status"));case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{refetchInterval:5e3,onSuccess:function(e){var t=e.data;f(t),w(N+1),u(void 0)},onError:function(e){var t=(((e.response||{}).data||{}).error||{}).message;t?(u("Error fetching meeting: "+t),"jwt expired"===t&&C(!0)):e===v?(u("No access token, please log out and in again."),alert("No access token, please log in again"),r.signout()):u("Error: "+e)}}),xe=je.isFetching,he=je.isLoading;Object(_.c)(["moderator",p],function(){var e=Object(m.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B({meetingId:r._id,moderatorId:r.moderator,asGuest:r.accessAsGuest});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{enabled:!!p&&!Q,onSuccess:function(e){var t=e.data;return K(t)},onError:function(e){var t=(((e.response||{}).data||{}).error||{}).message;t&&console.error(t)}}),Object(a.useEffect)((function(){Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W||!r.user){e.next=12;break}return e.prev=1,e.t0=Z,e.next=5,V({id:r.user.userId});case 5:e.t1=e.sent.data,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),console.error(e.t2);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()}),[r,W]);var pe=Object(_.b)(z,{onSuccess:function(e){u(void 0),P(!0)},onError:function(e){e.response?u("useQuery.onError: "+JSON.stringify(e.response)):u("useQuery other error:"+e.message)}}),fe=Object(x.a)(pe,1)[0];if(Object(a.useEffect)((function(){function e(){return(e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe({meetingId:p._id,participantId:r.user.userId});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}p&&(r||{}).user&&!H&&function(){e.apply(this,arguments)}()}),[p,r,fe,H]),!p)return Object(n.jsx)("div",{className:"flex h-screen items-center justify-center ".concat(xe||he?"cursor-wait":""),children:d?Object(n.jsx)("div",{className:"text-red-400",children:d}):Object(n.jsx)("div",{className:"text-center text-3xl items-start",children:Object(n.jsx)(o.b,{to:"/",children:"Please wait..."})})});if(Object(de.iAmModerator)(p,r)&&!A){if(!Object(de.meetingHasStarted)(p))return Object(n.jsx)(l.a,{to:"/meeting/".concat(p.slug)});F(!0)}if(p.accessAsGuest&&t&&!p.isGuestsAllowed)return Object(n.jsx)("div",{className:"flex h-screen items-center justify-center",children:Object(n.jsx)("div",{className:"text-center text-3xl items-start underline",children:Object(n.jsx)(o.b,{to:"/",children:"Guests are not allowed in this meeting."})})});var Oe=function(){var e=Object(m.a)(j.a.mark((function e(r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(de.meetingHasStarted)(r)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,R(r.slug,t?ee||Ne:null,(function(e,t){return ie({id:r._id,tabOpened:e,url:e?null:t})}));case 4:(n=e.sent)&&be({id:r._id,message:JSON.stringify(n)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(t){if(!p.isGuestsAllowed)return Object(n.jsx)("div",{children:"GUESTS NOT ALLOWED"})}else if(!(r||{}).user&&!p.accessAsGuest)return Object(n.jsx)(l.a,{to:"/m/".concat(p.slug)});return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"flex flex-col mt-1 ml-1 mr-1 md:mt-2 md:ml-8 md:mr-8",children:[Object(n.jsxs)("div",{className:"md:mt-4 mb-2 border rounded border-width-2 border-opacity-25",children:[Object(n.jsx)("div",{className:"p-4 text-lg rounded-md ",children:p.topic||"\u2014"}),p.description&&Object(n.jsx)("div",{className:"italic rounded-md p-4",children:p.description})]}),Q&&Object(n.jsxs)("div",{className:"p-4 rounded-md border border-width-2 border-opacity-25",children:[Object(n.jsx)("div",{className:"text-lg",children:"Moderator:"}),Object(n.jsx)("div",{className:"p-4 rounded-md border border-width-2 border-opacity-25 break-all",children:Q.username?"".concat(Q.username," (").concat(Q.email,")"):Q.email})]}),Object(n.jsxs)("div",{className:"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25",children:[Object(n.jsxs)("div",{className:"text-lg",children:["Current meeting status: ",de.MEETINGSTATUSES[Object(de.meetingStatus)(p)]]}),p.accessAsGuest&&Object(n.jsx)(re.d,{initialValues:{guestName:""},validate:function(e){var t={};return e.guestName&&e.guestName.length>30&&(t.guestName="Max 30 characters"),ne(e.guestName),t},children:function(e){var t,r,a,c=e.errors,s=e.touched;return Object(n.jsxs)(re.c,{children:[Object(n.jsx)(re.b,{className:"bg-yellow-200 rounded p-2 border-width-2 ".concat((t=c,r=s,a="guestName",t[a]&&r[a]?"border-2 border-red-400":"")),type:"text",name:"guestName",placeholder:"Name"}),Object(n.jsx)("div",{}),Object(n.jsx)(re.a,{name:"guestName",render:function(e){return Object(n.jsx)("div",{className:"text-red-400",children:e})}})]})}}),!!Object(de.meetingHasStarted)(p)&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"mt-2 ml-2 mb-2",children:["open the conference",Object(n.jsx)("span",{className:"font-bold",children:"".concat(p.accessAsGuest?" as guest":" as ".concat((W||{}).username?(W||{}).username:((r||{}).user||{}).email))})]}),Object(n.jsx)("div",{className:"flex",children:Object(n.jsxs)("div",{className:"ml-2 mr-2 ",children:[Object(n.jsx)(te,{colour:"green",onClick:function(e){return Oe(p)},text:"Go to meeting"}),!!se&&!se.tabOpened&&se.id===p._id&&Object(n.jsxs)("div",{className:"p-4 rounded-md bg-red-300 break-all",children:[Object(n.jsx)("p",{children:"Pop-up blocked, use"}),Object(n.jsx)("p",{children:Object(n.jsx)("a",{className:"underline",href:se,children:se})})]}),ue&&ue.id===p._id&&Object(n.jsxs)("div",{className:"p-4 rounded-md bg-red-300 break-all",children:[Object(n.jsx)("p",{children:"Error:"}),Object(n.jsx)("p",{children:ue.message})]})]})})]})]}),Object(n.jsx)("div",{className:"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25",children:Object(n.jsxs)("div",{className:"mt-2 p-2 border rounded border-2 border-opacity-25 break-all",children:[!!p.startDateTime&&Object(n.jsxs)("div",{children:["scheduled start: ",ve(p.startDateTime)]}),!!p.endDateTime&&Object(n.jsxs)("div",{children:["scheduled end: ",ve(p.endDateTime)]}),!!p.realStartDateTime&&Object(n.jsxs)("div",{children:["last start: ",ve(p.realStartDateTime)]}),!!p.realEndDateTime&&Object(n.jsxs)("div",{children:["last end: ",ve(p.realEndDateTime)]}),void 0!==p.duration&&Object(n.jsxs)("div",{children:["duration so far: ",me(p)]}),Object(n.jsxs)("div",{children:["room name:"," ","".concat(p.roomName?'"'+p.roomName+'"':"(no room has been created yet)")]}),Object(n.jsxs)("div",{children:["Guests allowed: \xa0"," ",Object(n.jsx)("input",{type:"checkbox",checked:p.isGuestsAllowed,disabled:!0})]})]})})]}),d&&Object(n.jsx)("div",{className:"text-red-400",children:d})]})},ye=function(){var e=E(),t=Object(l.g)(),r=Object(l.i)().slug,c=Object(ee.a)("meetingDetails"),s=Object(a.useState)(),i=Object(x.a)(s,2),d=i[0],u=i[1],b=Object(a.useState)(),h=Object(x.a)(b,2),p=h[0],f=h[1],O=Object(a.useState)(!1),g=Object(x.a)(O,2),N=g[0],w=g[1],y=Object(a.useState)(),k=Object(x.a)(y,2),S=k[0],T=k[1],D=Object(a.useState)(),C=Object(x.a)(D,2),I=C[0],M=C[1],A=Object(a.useState)(),F=Object(x.a)(A,2),G=F[0],B=F[1],J=Object(a.useState)(),Q=Object(x.a)(J,2),K=Q[0],z=Q[1],Y=Object(_.c)(["meeting",r],function(){var e=Object(m.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({slug:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{onSuccess:function(e){var t=e.data;f(t),u(null)},onError:function(t){var r=(((t.response||{}).data||{}).error||(t.response||{}).data||{}).message;r?u(r):t===v?(u("No access token, please log out and in again."),alert("No access token, please log in again"),e.signout()):u("Error: "+t)}}).isLoading;Object(_.c)(["participants",p],function(){var e=Object(m.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({meetingId:r._id,meetingParticipants:r.participants});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{enabled:!!p&&(p.participants||[]).length,onSuccess:function(e){var t=e.data;return T(t)},onError:function(e){var t=(((e.response||{}).data||{}).error||{}).message;t&&console.error(t)}});var W=Object(_.b)(q,{onSuccess:function(e){_.a.refetchQueries(["meetings"]),t.goBack()},onError:function(e){e.response?u("useQuery.onError: "+JSON.stringify(e.response)):u("useQuery other error:"+e.message)}}),Z=Object(x.a)(W,1)[0];Object(a.useEffect)((function(){Object(m.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I||!e.user){t.next=12;break}return t.prev=1,t.t0=M,t.next=5,V({id:e.user.userId});case 5:t.t1=t.sent.data,(0,t.t0)(t.t1),t.next=12;break;case 9:t.prev=9,t.t2=t.catch(1),console.error(t.t2);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}),[e,I]);var $=function(){var e=Object(m.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(de.meetingHasStarted)(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,R(t.slug,void 0,(function(e,r){return B({id:t._id,tabOpened:e,url:e?null:r})}));case 4:(r=e.sent)&&z({id:t._id,message:JSON.stringify(r)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"m-4 mb-2",children:Object(n.jsx)(te,{colour:"white",additionalClass:"border-2 hover:bg-gray-100 flex items-center",onClick:function(e){return t.goBack()},text:Object(n.jsx)("span",{children:"<\u2014 Back"})})}),!!p&&Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"flex flex-col mt-1 ml-1 mr-1 md:mt-2 md:ml-8 md:mr-8",children:[Object(n.jsxs)("div",{className:"mt-4 mb-2 border rounded border-width-2 border-opacity-25",children:[Object(n.jsx)(o.b,{to:U(p.slug),children:Object(n.jsx)("div",{className:"p-4 text-lg hover:bg-gray-100 rounded-md ",children:p.topic||"\u2014"})}),p.description&&Object(n.jsx)("div",{className:"italic hover:bg-green-400 rounded-md p-4",children:p.description})]}),Object(n.jsxs)("div",{className:"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25",children:[Object(n.jsxs)("div",{className:"text-lg",children:["Current meeting status:"," ",de.MEETINGSTATUSES[Object(de.meetingStatus)(p)]]}),Object(n.jsxs)("div",{className:"flex",children:[!Object(de.iAmModerator)(p,e)&&Object(n.jsx)(o.b,{to:U(p.slug),children:Object(n.jsx)("div",{className:"w-48 text-center bg bg-green-400 hover:bg-green-600 uppercase rounded-md p-4 ",children:"Join meeting"})}),Object(de.iAmModerator)(p,e)&&Object(de.meetingHasStarted)(p)&&Object(n.jsxs)("div",{className:"p-2",children:[Object(n.jsx)(te,{colour:"green",onClick:function(e){return $(p)},children:"Open meeting"}),!!G&&!G.tabOpened&&G.id===p._id&&Object(n.jsxs)("div",{className:"p-4 rounded-md bg-red-300 break-all",children:[Object(n.jsx)("p",{children:"Pop-up blocked, use"}),Object(n.jsx)("p",{children:Object(n.jsx)("a",{className:"underline",href:G,children:G})})]}),K&&K.id===p._id&&Object(n.jsxs)("div",{className:"p-4 rounded-md bg-red-300 break-all",children:[Object(n.jsx)("p",{children:"Error:"}),Object(n.jsx)("p",{children:K.message})]})]}),Object(n.jsx)("div",{className:"p-2",children:Object(n.jsx)(ue,{meeting:p,auth:e,queryKeys:["meeting",r]})}),Object(de.meetingHasNotStarted)(p)&&!Object(de.meetingHasStarted)(p)&&Object(n.jsx)("div",{className:"p-2",children:Object(n.jsx)(te,{colour:"red",onClick:function(e){return Z({id:p._id})},children:"Delete"})})]})]}),Object(n.jsxs)("div",{className:"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25",children:[Object(n.jsx)("label",{htmlFor:"editMeeting"}),!N&&Object(n.jsxs)(te,{id:"editMeeting",colour:"white",onClick:function(e){return w(!0)},additionalClass:"border-2 hover:bg-gray-100 flex items-center",children:[Object(n.jsx)("i",{className:"fas fa-edit text-2xl"}),"\xa0",c("editButton","edit")]}),N&&Object(n.jsx)(Oe,{initialMeeting:p,afterSubmit:function(e){return w(!1)}}),Object(n.jsxs)("div",{className:"mt-2 p-2 border rounded border-2 border-opacity-25",children:[!!p.startDateTime&&Object(n.jsxs)("div",{children:["scheduled start: ",ve(p.startDateTime)]}),!!p.endDateTime&&Object(n.jsxs)("div",{children:["scheduled end: ",ve(p.endDateTime)]}),!!p.realStartDateTime&&Object(n.jsxs)("div",{children:["last start: ",ve(p.realStartDateTime)]}),!!p.realEndDateTime&&Object(n.jsxs)("div",{children:["last end: ",ve(p.realEndDateTime)]}),void 0!==p.duration&&Object(n.jsxs)("div",{children:["duration so far: ",me(p)]}),Object(n.jsxs)("div",{children:["room name:"," ","".concat(p.roomName?'"'+p.roomName+'"':"(no room has been created yet)")]}),Object(n.jsxs)("div",{children:["Guests allowed: \xa0"," ",Object(n.jsx)("input",{type:"checkbox",checked:p.isGuestsAllowed,disabled:!0})]})]})]}),Object(n.jsxs)("div",{className:"mt-4 mb-2 p-4 border rounded border-width-2 border-opacity-25 italic",children:[Object(n.jsx)("div",{className:"text-lg",children:"E-mail template:"}),Object(n.jsxs)("div",{className:"ml-4 break-all",children:["Dear meeting participant,",Object(n.jsx)("p",{}),"you are invited to join my meeting",!!p.startDateTime&&" starting at ".concat(ve(p.startDateTime)," "),!!p.endDateTime&&" and ending at ".concat(ve(p.endDateTime)," "),Object(n.jsx)("p",{}),Object(n.jsxs)("div",{className:"mt-2",children:["If you are a registered user of"," ","Annolens",", you can join through this direct link:",Object(n.jsx)("div",{className:"ml-2",children:U(p.slug)})]}),Object(n.jsx)("p",{}),p.isGuestsAllowed?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"mt-2",children:"Or you can join as a guest with this link:"}),Object(n.jsx)("div",{className:"ml-2",children:H(p.slug)})]}):null,Object(n.jsx)("p",{}),p.description&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"mt-2",children:"This meeting will be about:"}),Object(n.jsx)("div",{className:"ml-2",children:p.description})]}),Object(n.jsx)("p",{}),Object(n.jsx)("div",{className:"pt-2",children:"Yours faithfully,"}),Object(n.jsx)("p",{}),"".concat(I&&I.username?"".concat(I.username," (").concat(e.user.email,")"):e.user.email)]})]}),S&&!!S.length&&Object(n.jsxs)("div",{className:"p-4 rounded-md border border-width-2 border-opacity-25 break-all",children:[Object(n.jsx)("div",{className:"text-lg italic",children:"Participants:"}),S.map((function(e){return Object(n.jsx)("div",{className:"mt-1 mb-1 p-4 rounded-md border border-width-2 border-opacity-25",children:e.username?"".concat(e.username," (").concat(e.email,")"):e.email},e.email)}))]})]})}),Y&&Object(n.jsx)("div",{children:"loading..."}),d?Object(n.jsxs)("div",{children:["Error: ",JSON.stringify(d)]}):null]})},ke=r(67),Se="en-GB",Te="en-US",Ee=Se,De=[{label:"English (GB)",value:Se},{label:"English (US)",value:Te},{label:"Deutsch",value:"de"},{label:"Fran\xe7ais",value:"fr"}],Ce=De.find((function(e){return e.value===Ee})),_e={application:function(e){return"Annolens-EN"},login:{info:function(e){return"Bitte loggen Sie sich ein, um die Seite "+e.DEEPLINK+" zu besuchen."},label:function(e){return"Einloggen"},welcome:function(e){return"Willkommen bei "+e.BRANDING+"!"}},messages:{create:function(e){return"Create"}},meetingDetails:{addMeetingButton:function(e){return"F\xfcge ein neues Meeting hinzu"},editButton:function(e){return"\xc4ndere Meeting-Details"},cancelButton:function(e){return"Abbrechen"}},profile:{editUserButton:function(e){return"Edit user details"}}},Ie={application:function(e){return"Annolens-EN"},login:{info:function(e){return"You must log in to view the page "+e.DEEPLINK},label:function(e){return"Log in"},welcome:function(e){return"Welcome to "+e.BRANDING+"!"}},messages:{create:function(e){return"Create"}},meetingDetails:{addMeetingButton:function(e){return"Add a new meeting"},editButton:function(e){return"Edit Meeting Details"},cancelButton:function(e){return"Cancel"}},profile:{editUserButton:function(e){return"Edit user details"},emailChanged:function(e){return"Thank you for updating your e-mail address. You will have to validate your e-mail address again, please check the e-mail that should arrive within a few minutes."}},userList:{addUserButton:function(e){return"Add user"},clearSearch:function(e){return"Clear"}}},Me={application:function(e){return"Annolens-FR"},login:{info:function(e){return"Veuillez connecter pour visiter la page \xe0 "+e.DEEPLINK+", s'il vous pla\xeet."},label:function(e){return"Se connecter"},welcome:function(e){return"Bienvenue \xe0 "+e.BRANDING+"!"}},messages:{create:function(e){return"Cr\xe9er"}}},Ae=Object(a.createContext)(),Fe=Object(a.createContext)(),Ge=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage||Ee,Ue=function(e,t){switch(t.value){case"de":case"de-DE":case"de-AT":case"de-CH":case"de-LI":case"de-LU":return{lang:t,messages:_e};case"en":case Te:case Se:return{lang:t,messages:Ie};case"fr":case"fr-BE":case"fr-CH":case"fr-FR":case"fr-LU":case"fr-MC":return{lang:t,messages:Me};default:throw new Error("Unhandled i18n language: ".concat(JSON.stringify(t.value)))}},He={lang:Ge,messages:Ie},Re=function(e){var t=e.children,r=Object(a.useReducer)(Ue,He),c=Object(x.a)(r,2),s=c[0],i=c[1];return Object(n.jsx)(Ae.Provider,{value:s,children:Object(n.jsx)(Fe.Provider,{value:i,children:t})})},Pe="https://dev.annolens.com";var Le=function(){var e=Object(l.g)(),t=Object(l.h)(),r=E(),s=function(){var e=c.a.useContext(Fe);if(void 0===e)throw new Error("useI18nDispatch must be used within a I18nProvider");return e}(),i=Object(ee.a)("login"),o=(t.state||{from:{pathname:t.pathname}}||{from:{pathname:"/"}}).from,d=o.pathname&&"/"!==o.pathname?function(e){if(!e)return e;var t=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}));return btoa(t)}(o.pathname):"",u=d?"".concat(Pe,"/api/auth/login?deepLink=").concat(d):"".concat(Pe,"/api/auth/login");return Object(a.useEffect)((function(){!r.user&&O.getItem("user")&&r.updateUser((function(r){return e.replace(t.pathname)}))}),[r,e,t]),r.user?null:Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"p-2 w-48 ml-auto",children:Object(n.jsx)(ke.a,{width:"auto",defaultValue:Ce,onChange:s,options:De})}),Object(n.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[Object(n.jsx)("div",{className:"py-4"}),Object(n.jsx)("div",{className:"text-center text-3xl",children:i("welcome",{BRANDING:"Annolens"})}),Object(n.jsx)("div",{className:"py-4"}),Object(n.jsx)("div",{className:"text-center",children:Object(n.jsx)("div",{className:"text-xs",children:i("info",{DEEPLINK:o.pathname})})}),Object(n.jsxs)("div",{className:"flex justify-between mt-8",children:[Object(n.jsx)("div",{}),Object(n.jsx)("a",{href:u,children:Object(n.jsx)(te,{colour:"green",additionalClass:"px-16 py-8 w-90",children:i("label")})}),Object(n.jsx)("div",{})]})]})]})},Be=function(e){var t=Object(l.g)(),r=Object(l.h)(),c=E();var s=new URLSearchParams(r.search);return Object(a.useEffect)((function(){if(!c.user&&!O.getItem("accessToken")){var e=s.get("code"),r=function(e){if(!e)return e;var t=atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("");return decodeURIComponent(t)}(s.get("state"));c.signin({code:e,state:r},(function(e){return t.replace(e||"/")}))}}),[c,t,s]),Object(n.jsx)("div",{className:"flex h-screen items-center justify-center cursor-wait",children:Object(n.jsx)("div",{className:"text-center text-3xl items-start",children:"Please wait ..."})})};var Je=function(){var e=E(),t="".concat("https://dev.annolens.com","/api/auth/logout");return e.user?Object(n.jsx)("p",{children:Object(n.jsx)("a",{href:t,onClick:function(t){return e.signout((function(e){return console.log("auth.signout finished")}))},children:Object(n.jsx)("button",{className:"block w-full h-full text-center shadow-light text-sm uppercase font-extrabold py-6 border-transparent hover:bg-blue-900",children:"Sign out"})})}):Object(n.jsx)("p",{children:"You are not logged in."})};var Qe=function(){return E().user?Object(n.jsxs)("div",{className:"font-sans antialiased h-screen",children:[Object(n.jsxs)("header",{className:"z-50 w-full bg-blue-500 shadow flex items-center justify-between",children:[Object(n.jsx)("div",{className:"flex items-center text-center h-full w-full border-r border-blue-300",children:Object(n.jsx)("span",{className:"w-full text-white text-sm uppercase font-extrabold",children:Object(n.jsx)(o.b,{className:"block text-center x shadow-light x py-6 border-transparent hover:bg-blue-900",to:"/",children:"Home"})})}),Object(n.jsx)("div",{className:"flex items-center text-center h-full w-full border-r border-blue-300",children:Object(n.jsx)("span",{className:"w-full text-white text-sm uppercase font-extrabold",children:Object(n.jsx)(Je,{})})}),Object(n.jsx)("div",{className:"flex w-full sm:hidden md:hidden lg:hidden xl:hidden",children:Object(n.jsx)(C,{})})]}),Object(n.jsxs)("div",{className:u.a.Content,children:[Object(n.jsx)("aside",{className:"hidden sm:block md:block lg:block xl:block",children:Object(n.jsx)("div",{children:Object(n.jsx)(D,{})})}),Object(n.jsx)("main",{className:"border border-blue-300",children:Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{path:"/oauth-callback",children:Object(n.jsx)(Be,{})}),Object(n.jsx)(l.b,{path:"/m/:slug(".concat(G,")"),children:Object(n.jsx)(we,{})}),Object(n.jsx)(l.b,{path:"/meeting/:slug(".concat(G,")"),children:Object(n.jsx)(ye,{})}),Object(n.jsx)(l.b,{path:"/user-list",children:Object(n.jsx)(ce,{})}),Object(n.jsx)(l.b,{path:"/profile",children:Object(n.jsx)(ie,{})}),Object(n.jsx)(l.b,{path:"/meetings",children:Object(n.jsx)(ge,{})}),Object(n.jsx)(l.b,{path:"/login",children:Object(n.jsx)(Le,{})}),Object(n.jsx)(l.b,{path:"/",exact:!0,render:function(e){return Object(n.jsx)("div",{className:"p-16 text-center",children:"Select one of the menus on the left or top"})}}),Object(n.jsx)(l.b,{render:function(e){return Object(n.jsxs)("div",{className:"bg bg-red-200 p-16 text-center",children:["no such page ",e.location.pathname]})}})]})})]}),Object(n.jsx)("footer",{className:"border border-blue-300",children:"Footer"})]}):Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{path:"/m/:slug(".concat(G,")/guest"),children:Object(n.jsx)(we,{guestRoute:!0})}),Object(n.jsx)(l.b,{path:"/oauth-callback",children:Object(n.jsx)(Be,{})}),Object(n.jsx)(l.b,{path:"/",children:Object(n.jsx)(Le,{})})]})},Ke=r(113),qe=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,115)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};r(111);i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(T,{children:Object(n.jsx)(Re,{children:Object(n.jsx)(Ae.Consumer,{children:function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Ke.a,{messages:e.messages,children:Object(n.jsx)(o.a,{basename:"/portal/",children:Object(n.jsx)(Qe,{})})})})}})})})}),document.getElementById("root")),qe()},61:function(e,t,r){e.exports={Content:"App_Content__LFMSe"}},63:function(e,t){e.exports={openTab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank",r=arguments.length>2?arguments[2]:void 0,n=window.open(e,t);if(null!=n){n.focus();var a=new URL(e);window.addEventListener("message",(function(e){e.origin===a.origin&&"annolensPortalMeetingSlug|received"===e.data&&clearTimeout(c)}),!1);var c=setInterval((function(){var e="annolensPortalMeetingSlug|".concat(r);n.postMessage(e,a.origin)}),1e3);return setTimeout((function(){return clearInterval(c)}),6e4),!0}return!1}}}},[[112,1,2]]]);
//# sourceMappingURL=main.f4da74b6.chunk.js.map